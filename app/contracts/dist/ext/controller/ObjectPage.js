sap.ui.define(["sap/m/MessageToast","sap/m/MessageBox"],function(e,t){"use strict";return{onCreditCheckPress:function(r){if(!r){e.show("No contract context found on the Object Page.");return}const c=r.getModel();const s=r.getPath();const o=r.getObject();const a=o.contractNumber||o.ID||"(unknown)";const n=async(e,t=["creditStatus"])=>{try{await c.submitBatch(c.getUpdateGroupId());await e.requestSideEffects(t.map(e=>({$PropertyPath:e})))}catch(e){}};if(o.creditStatus==="Approved"){c.bindContext(s+"/ValueContractService.setCreditPending(...)").execute().then(async()=>{await n(r,["creditStatus"]);e.show(`Credit status set to Pending for contract ${a}.`)}).catch(e=>{console.error("setCreditPending failed:",e);t.error("Failed to set credit status to Pending.")})}else{c.bindContext(s+"/ValueContractService.setCreditUnderReview(...)").execute().then(async()=>{await n(r,["creditStatus"]);e.show(`Starting Prospect Research Agent check for contract ${a}...`);const o=s+"/ValueContractService.performCreditCheck(...)";setTimeout(()=>{c.bindContext(o).execute().then(async()=>{e.show(`Prospect Research Agent check completed for contract ${a}.`);await n(r,["creditStatus"])}).catch(e=>{console.error("performCreditCheck failed:",e);let r="Prospect Research Agent check failed";if(e?.message){r=e.message}else if(e?.error?.message){r=e.error.message}t.error(`Prospect Research Agent check failed for contract ${a}: ${r}`)})},1e4)}).catch(e=>{console.error("setCreditUnderReview failed:",e);t.error("Failed to set credit status to Under Review.")})}}}});
//# sourceMappingURL=ObjectPage.js.map