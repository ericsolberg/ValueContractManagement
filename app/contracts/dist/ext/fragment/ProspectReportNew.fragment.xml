<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
>
    <VBox
        class="sapUiResponsiveContentPadding"
        width="100%"
        id="vbox1"
        binding="{ path: '$context>' }"
        >
        <Toolbar id="toolbar1" width="600px">
            <Title
                text="{= ${creditStatus} !== 'Approved'
                    ? 'Pending credit review'
                    : ( ${ path: 'contractValue', targetType: 'any' } >= 500000 &amp;&amp; 'Generated November 4, 2025' ) || 'Generated January 15, 2025' }"
                level="H3"
                id="title1"
            />
            <ToolbarSpacer id="sp1"/>
            <!-- Open in new tab / download -->
            <Link
                text="Download PDF"
                href="{= ${assets>/baseUrl} + ( ${ path: 'contractValue', targetType: 'any' } >= 500000 ? ${assets>/pdfBefore} : ${assets>/pdfAfter} ) }"
                target="_blank"
                icon="sap-icon://download"
                id="dl1"
                visible="{= ${ path: 'creditStatus', targetType: 'any' } === 'Approved' }"
            />
        </Toolbar>
        <core:HTML
            id="prospectPdfFrame"
            sanitizeContent="false"
            content="{= ${ path: 'contractValue', targetType: 'any' } >= 500000 ? 
                '&lt;iframe src=&quot;'
                + ${assets>/baseUrl}
                + ${assets>/pdfAfter}
                + '#toolbar=0&amp;navpanes=0&amp;scrollbar=1&quot; '
                + 'style=&quot;border:0;width:600px;height:600px;&quot; '
                + 'loading=&quot;lazy&quot;&gt;&lt;/iframe&gt;' 
                :
                '&lt;iframe src=&quot;'
                + ${assets>/baseUrl}
                + ${assets>/pdfBefore}
                + '#toolbar=0&amp;navpanes=0&amp;scrollbar=1&quot; '
                + 'style=&quot;border:0;width:600px;height:600px;&quot; '
                + 'loading=&quot;lazy&quot;&gt;&lt;/iframe&gt;'                 
                }"
                visible="{= ${ path: 'creditStatus', targetType: 'any' } === 'Approved' }"
        />
    </VBox>
</core:FragmentDefinition>
