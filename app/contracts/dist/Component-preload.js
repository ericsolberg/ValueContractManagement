//@ui5-bundle valuecontractmanagement/contracts/Component-preload.js
sap.ui.predefine("valuecontractmanagement/contracts/Component", ["sap/fe/core/AppComponent","sap/ui/model/json/JSONModel"],function(t,e){"use strict";return t.extend("valuecontractmanagement.contracts.Component",{metadata:{manifest:"json"},init:function(){t.prototype.init.apply(this,arguments);const o=sap.ui.require.toUrl("valuecontractmanagement/contracts/assets/");const n=new e({baseUrl:o,pdfFile:"prospect-report-after.pdf",pdfBefore:"prospect-report-before.pdf",pdfAfter:"prospect-report-after.pdf",contractIcon:"ContractIcon.png"});this.setModel(n,"assets")}})});
sap.ui.predefine("valuecontractmanagement/contracts/ext/controller/ListReport", ["sap/m/MessageToast","sap/m/MessageBox"],function(e,t){"use strict";return{onCreditCheckPress:function(r,c){e.show("You are here.");if(!c||c.length===0){e.show("Please select at least one contract to perform credit check.");return}const o=c[0].getModel();c.forEach(function(r){const c=r.getPath();const n=r.getObject();if(n.creditStatus=="Approved"){o.bindContext(c+"/ValueContractService.setCreditPending(...)").execute().then(function(){o.refresh()})}else{o.bindContext(c+"/ValueContractService.setCreditUnderReview(...)").execute().then(function(){o.refresh();e.show(`Starting Prospect Research Agent check for contract ${n.contractNumber||n.ID}...`);const r=c+"/ValueContractService.performCreditCheck(...)";setTimeout(()=>{o.bindContext(r).execute().then(function(){e.show(`Prospect Research Agent check completed successfully for contract ${n.contractNumber||n.ID}!`);o.refresh()}).catch(function(e){console.error("Error calling performCreditCheck:",e);let r="Prospect Research Agent check failed";if(e.message){r=e.message}else if(e.error&&e.error.message){r=e.error.message}t.error(`Prospect Research Agent check failed for contract ${n.contractNumber||n.ID}: ${r}`)})},1e4)})}})}}});
sap.ui.predefine("valuecontractmanagement/contracts/ext/controller/OPExt.controller", ["sap/ui/core/mvc/ControllerExtension","sap/m/MessageToast"],function(t,e){"use strict";return t.extend("valuecontractmanagement.contracts.ext.controller.OPExt",{override:{onInit:function(){},editFlow:{onBeforeSave:function(t){},onAfterSavex:async function(){await new Promise(t=>setTimeout(t,0));const t=this.base.getView();const e=t.getBindingContext();if(!e)return;const n=e.getModel();let i=await e.requestCanonicalPath();i=i.replace("IsActiveEntity=false","IsActiveEntity=true");console.log(i);await n.bindContext(`${i}/ValueContractService.setCreditPending(...)`).execute();await e.requestSideEffects([{$PropertyPath:"creditStatus"}]);sap.m.MessageToast.show("Credit status set to Pending.")}}}})});
sap.ui.predefine("valuecontractmanagement/contracts/ext/controller/ObjectPage", ["sap/m/MessageToast","sap/m/MessageBox"],function(e,t){"use strict";return{onCreditCheckPress:function(r){if(!r){e.show("No contract context found on the Object Page.");return}const c=r.getModel();const s=r.getPath();const o=r.getObject();const a=o.contractNumber||o.ID||"(unknown)";const n=async(e,t=["creditStatus"])=>{try{await c.submitBatch(c.getUpdateGroupId());await e.requestSideEffects(t.map(e=>({$PropertyPath:e})))}catch(e){}};if(o.creditStatus==="Approved"){c.bindContext(s+"/ValueContractService.setCreditPending(...)").execute().then(async()=>{await n(r,["creditStatus"]);e.show(`Credit status set to Pending for contract ${a}.`)}).catch(e=>{console.error("setCreditPending failed:",e);t.error("Failed to set credit status to Pending.")})}else{c.bindContext(s+"/ValueContractService.setCreditUnderReview(...)").execute().then(async()=>{await n(r,["creditStatus"]);e.show(`Starting Prospect Research Agent check for contract ${a}...`);const o=s+"/ValueContractService.performCreditCheck(...)";setTimeout(()=>{c.bindContext(o).execute().then(async()=>{e.show(`Prospect Research Agent check completed for contract ${a}.`);await n(r,["creditStatus"])}).catch(e=>{console.error("performCreditCheck failed:",e);let r="Prospect Research Agent check failed";if(e?.message){r=e.message}else if(e?.error?.message){r=e.error.message}t.error(`Prospect Research Agent check failed for contract ${a}: ${r}`)})},1e4)}).catch(e=>{console.error("setCreditUnderReview failed:",e);t.error("Failed to set credit status to Under Review.")})}}}});
sap.ui.require.preload({
	"valuecontractmanagement/contracts/ext/fragment/ProspectReportNew.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n><VBox\n        class="sapUiResponsiveContentPadding"\n        width="100%"\n        id="vbox1"\n        binding="{ path: \'$context>\' }"\n        ><Toolbar id="toolbar1" width="600px"><Title\n                text="{= ${creditStatus} !== \'Approved\'\n                    ? \'Pending credit review\'\n                    : ( ${ path: \'contractValue\', targetType: \'any\' } >= 500000 &amp;&amp; \'Generated November 4, 2025\' ) || \'Generated January 15, 2025\' }"\n                level="H3"\n                id="title1"\n            /><ToolbarSpacer id="sp1"/><Link\n                text="Download PDF"\n                href="{= ${assets>/baseUrl} + ( ${ path: \'contractValue\', targetType: \'any\' } >= 500000 ? ${assets>/pdfBefore} : ${assets>/pdfAfter} ) }"\n                target="_blank"\n                icon="sap-icon://download"\n                id="dl1"\n                visible="{= ${ path: \'creditStatus\', targetType: \'any\' } === \'Approved\' }"\n            /></Toolbar><core:HTML\n            id="prospectPdfFrame"\n            sanitizeContent="false"\n            content="{= ${ path: \'contractValue\', targetType: \'any\' } >= 500000 ? \n                \'&lt;iframe src=&quot;\'\n                + ${assets>/baseUrl}\n                + ${assets>/pdfAfter}\n                + \'#toolbar=0&amp;navpanes=0&amp;scrollbar=1&quot; \'\n                + \'style=&quot;border:0;width:600px;height:600px;&quot; \'\n                + \'loading=&quot;lazy&quot;&gt;&lt;/iframe&gt;\' \n                :\n                \'&lt;iframe src=&quot;\'\n                + ${assets>/baseUrl}\n                + ${assets>/pdfBefore}\n                + \'#toolbar=0&amp;navpanes=0&amp;scrollbar=1&quot; \'\n                + \'style=&quot;border:0;width:600px;height:600px;&quot; \'\n                + \'loading=&quot;lazy&quot;&gt;&lt;/iframe&gt;\'                 \n                }"\n                visible="{= ${ path: \'creditStatus\', targetType: \'any\' } === \'Approved\' }"\n        /></VBox></core:FragmentDefinition>\n',
	"valuecontractmanagement/contracts/i18n/i18n.properties":'# This is the resource bundle for valuecontractmanagement.contracts\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Value Contracts Management\n\n#YDES: Application description\nappDescription=Manage value contracts and credit assessments\n\n#XFLD,78\nvaluecontractmanagementcontrac-display.flpTitle=Value Contracts Management\n',
	"valuecontractmanagement/contracts/manifest.json":'{"_version":"1.73.1","sap.app":{"id":"valuecontractmanagement.contracts","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:lrop","version":"1.19.3","toolsId":"dc41e2a3-e5b7-4a2d-8f73-05e69ef84936"},"dataSources":{"mainService":{"uri":"service/ValueContractService/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"customers-display":{"semanticObject":"customers","action":"display","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.136.7","libs":{"sap.m":{},"sap.ui.core":{},"sap.fe.templates":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"valuecontract.contracts.contracts.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"@i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":[""]}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{},"routes":[{"pattern":":?query:","name":"ValueContractsList","target":"ValueContractsList"},{"pattern":"ValueContracts({key}):?query:","name":"ValueContractsObjectPage","target":"ValueContractsObjectPage"}],"targets":{"ValueContractsList":{"type":"Component","id":"ValueContractsList","name":"sap.fe.templates.ListReport","options":{"settings":{"contextPath":"/ValueContracts","variantManagement":"Page","navigation":{"ValueContracts":{"detail":{"route":"ValueContractsObjectPage"}}},"controlConfiguration":{"@com.sap.vocabularies.UI.v1.LineItem":{"tableSettings":{"type":"ResponsiveTable"},"actions":{"credCheck":{"press":"valuecontractmanagement.contracts.ext.controller.ListReport.onCreditCheckPress","visible":true,"enabled":true,"requiresSelection":false,"text":"Perform Credit Analysis"}}}},"initialLoad":"Enabled"}}},"ValueContractsObjectPage":{"type":"Component","id":"ValueContractsObjectPage","name":"sap.fe.templates.ObjectPage","options":{"settings":{"editableHeaderContent":false,"contextPath":"/ValueContracts","content":{"header":{"actions":{"credCheck":{"press":"valuecontractmanagement.contracts.ext.controller.ObjectPage.onCreditCheckPress","visible":true,"enabled":true,"text":"Perform Credit Analysis"}}},"body":{"sections":{"ProspectReportNew":{"template":"valuecontractmanagement.contracts.ext.fragment.ProspectReportNew","position":{"placement":"After","anchor":"GeneralFacet1"},"title":"Prospect Research Agent Report"}}}}}}}}},"extends":{"extensions":{"sap.ui.controllerExtensions":{"sap.fe.templates.ObjectPage.ObjectPageController":{"controllerName":"valuecontractmanagement.contracts.ext.controller.OPExt"}}}},"flexBundle":false},"sap.fiori":{"registrationIds":[],"archeType":"transactional"},"sap.cloud":{"public":true,"service":"lcap.contracts"}}'
});
//# sourceMappingURL=Component-preload.js.map
